#### 重入锁
重入锁使得同一个线程可以对同一把锁，在不释放的前提下，反复加锁，而不会导致线程卡死。因此，如果我们使用的是重入锁，那么上述代码就 可以正常工作。你唯一需要保证的，就是unlock()的次数和lock()一样多。

#### java中可重入锁
实现重入锁的方法很简单，就是基于一个状态变量state。这个变量保存在AbstractQueuedSynchronizer对象中。当这个state==0时，表示锁是空闲的，大于零表示锁已经被占用， 它的数值表示当前线程重复占用这个锁的次数。

对于同一个线程，重入锁允许你反复获得通一把锁，但是，申请和释放锁的次数必须一致。
默认情况下，重入锁是非公平的，公平的重入锁性能差于非公平锁
重入锁的内部实现是基于CAS操作的。
重入锁的伴生对象Condition提供了await()和singal()的功能，可以用于线程间消息通信。