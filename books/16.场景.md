#### 多机房异步架构

#### 单点故障处理

#### 批量获取分布式id
雪花id中有序列号（根据位数确定最大），AtomicLong存储获取到的id，步长设置为位数确定的最大值。之后没到最大值，都由AtomicLong.getAndIncrement获取id
雪花id获取完更新lastTimestamp，获取是同步进行的，如果并发了，下次获取主动将timestamp+1。